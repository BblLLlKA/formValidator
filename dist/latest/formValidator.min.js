!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.FormValidator=t()}("undefined"!=typeof window?window:this,function(){return class e{static version="2.0.1";constructor(e="",t={}){if(this.form=document.getElementById(e),!this.form)throw Error(`Form with id "${e}" not found.`);this.fields=["fullName","firstName","lastName","email","phoneNumber",],this.fields.forEach(e=>this[e]=this.form.querySelector(`#${e}`)||null),this.events={validationSuccess:[],validationError:[]},this.language=t.language?t.language.toLowerCase():"en",this.messages=t.messages||this.getDefaultMessages(),this.messages[this.language]||(console.warn(`Language "${this.language}" not found in messages. Using default messages.`),this.language="en",this.messages=this.getDefaultMessages()),this.generateErrorMessages(),this.setupPhoneNumberInput(t.iti||this.getDefaultItiOptions()),this.form.addEventListener("submit",this.validateForm.bind(this)),this.form.addEventListener("input",this.handleInput.bind(this))}on(e,t){"function"==typeof t&&this.events[e]&&this.events[e].push(t)}notifySubscribers(e,t){this.events[e]&&this.events[e].forEach(e=>e(t))}generateErrorMessages(){this.fields.forEach(e=>{if(this[e]){let t=document.createElement("div");t.id=`${e}Error`,t.classList.add("field-error"),this[e].insertAdjacentElement("afterend",t)}})}getDefaultMessages(){return{en:{fullNameError:"The full name must contain at least two words.",firstNameError:"First name must be at least 2 characters.",lastNameError:"Last name must be at least 2 characters.",emailError:"Enter a valid email address.",phoneNumberError:"Enter a valid phone number."}}}getDefaultItiOptions(){return{initialCountry:"auto",hiddenInput:"fullPhone",geoIpLookup:e=>{let t=this.getCookie("ipData");t?e(JSON.parse(t).country_code):fetch("https://ipapi.co/json").then(e=>e.json()).then(t=>{this.setCookie("ipData",JSON.stringify(t),1),e(t.country_code)}).catch(()=>e("us"))},utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js"}}setCookie(e,t,i){let s=new Date;s.setTime(s.getTime()+864e5*i),document.cookie=`${e}=${t};expires=${s.toUTCString()};path=/`}getCookie(e){let t=document.cookie.match(RegExp("(^| )"+e+"=([^;]+)"));return t?t[2]:null}setupPhoneNumberInput(e){this.phoneNumber&&(this.loadScript("https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js",()=>{this.iti=window.intlTelInput(this.phoneNumber,e)}),this.loadStylesheet("https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css"))}loadStylesheet(e){let t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}loadScript(e,t){let i=document.createElement("script");i.src=e,i.onload=t,document.head.appendChild(i)}toggleInputClass(e,t){e.classList.toggle("error",!t),e.classList.toggle("done",t)}updateErrorText(e,t,i){e.textContent=t?"":this.messages[this.language][`${i}Error`]}validateField(e,t){let i=this[e],s=this.form.querySelector(`#${e}Error`);if(i&&s){let a=t(i.value.trim());return this.toggleInputClass(i,a),this.updateErrorText(s,a,e),a}return!0}validateFullName(e){return e.split(/\s+/).length>=2}validateName(e){return e.length>=2}validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}validatePhoneNumber(){return!!this.iti&&this.iti.isValidNumber()}validateForm(e){e.preventDefault();let t=this.fields.reduce((e,t)=>{if(this[t]){let i="email"===t?this.validateEmail:"phoneNumber"===t?this.validatePhoneNumber.bind(this):"fullName"===t?this.validateFullName:this.validateName;e[t]=this.validateField(t,i)}return e},{}),i=Object.values(t).every(e=>e);i?(console.log("Form successfully validated."),this.notifySubscribers("validationSuccess",this.form)):(this.notifySubscribers("validationError",t),console.warn("Form validation failed."))}handleInput(e){if("INPUT"===e.target.tagName){let t=e.target.id;if(this[t]){let i="email"===t?this.validateEmail:"phoneNumber"===t?this.validatePhoneNumber.bind(this):"fullName"===t?this.validateFullName:this.validateName;this.validateField(t,i)}}}}});