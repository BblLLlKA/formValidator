!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.FormValidator=t()}("undefined"!=typeof window?window:this,function(){return class e{static version="1.0.1";constructor(e,t={}){if(this.form=document.getElementById(e),!this.form)throw Error(`Form with id "${e}" not found.`);this.language=t.language?t.language.toLowerCase():"en",this.setupPhoneNumberInput(),this.events={validationSuccess:[],validationError:[],handleInput:[]},this.form.addEventListener("submit",this.validateForm.bind(this)),this.form.addEventListener("input",this.handleInput.bind(this)),this.messages=t.messages||this.getDefaultMessages(),this.messages[this.language]||(console.warn(`Language "${this.language}" not found in messages. Using default language.`),this.language="en")}on(e,t){"function"==typeof t&&this.events[e]&&this.events[e].push(t)}notifySubscribers(e,t){this.events[e]&&this.events[e].forEach(e=>{e(t)})}setupPhoneNumberInput(){let e=this.form.querySelector("#phoneNumber");e&&(this.addStylesheet("https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css"),this.iti=window.intlTelInput(e,{initialCountry:"auto",hiddenInput:"full_phone",geoIpLookup(e){fetch("https://ipapi.co/json").then(e=>e.json()).then(t=>e(t.country_code)).catch(()=>e("us"))},utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js"}))}addStylesheet(e){let t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}getDefaultMessages(){return{en:{firstNameError:"First name should be at least 2 characters long",lastNameError:"Last name should be at least 2 characters long",emailError:"Enter a valid email address",phoneNumberError:"Enter a valid phone number"}}}validateField(e,t){let i=this.form.querySelector(`#${e}`),s=this.form.querySelector(`#${e}Error`);if(i||s){let a=i.value.trim(),r=t(a);return this.toggleInputClass(i,r),this.updateErrorText(s,r,e),r}}toggleInputClass(e,t){e.classList.remove(t?"error":"done"),e.classList.add(t?"done":"error")}updateErrorText(e,t,i){e.textContent=t?"":this.messages[this.language][`${i}Error`]}validateName(e){return e.length>=2}validateEmail(e){let t=this.form.querySelector("#email"),i=t.checkValidity(),s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim());return i&&s}validatePhoneNumber(){return this.iti.isValidNumber()}validateForm(e){e.preventDefault();let t={},i=["firstName","lastName","email","phoneNumber",].every(e=>{let i="email"===e?this.validateEmail.bind(this):this["phoneNumber"===e?"validatePhoneNumber":"validateName"].bind(this),s=this.form.querySelector(`[name="${e}"]`);return s?t[e]=this.validateField(e,i):(console.warn(`Field "${e}" not found.`),t[e]=!0),t[e]});if(i)this.notifySubscribers("validationSuccess",t),console.log("Form submitted successfully."),e.target.submit();else throw this.notifySubscribers("validationError",t),Error("Form validation failed.")}handleInput(e){let t=e.target;if("INPUT"===t.tagName){this.notifySubscribers("handleInput",e.target);let i=t.name,s="email"===i?this.validateEmail.bind(this):this["phoneNumber"===i?"validatePhoneNumber":"validateName"].bind(this);this.validateField(i,s)}}}});